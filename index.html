<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HD Libre - Partidos en Vivo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f0f0f 0%, #1a1a1a 100%);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }





        .filters {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 18px 36px;
            border: none;
            border-radius: 30px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.4rem;
            font-weight: 500;
            backdrop-filter: blur(10px);
        }

        .filter-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .filter-btn.active {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
        }

                 .carousel-container {
             position: relative;
             width: 1280px;
             height: 720px;
             margin: 0 auto 40px auto;
             overflow: hidden;
         }

        .carousel-track {
            display: flex;
            transition: transform 0.5s ease-in-out;
        }

        .carousel-slide {
            min-width: 100%;
            flex-shrink: 0;
        }

        .carousel-nav {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-top: 30px;
        }

        .carousel-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 50%;
            width: 80px;
            height: 80px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            color: white;
            backdrop-filter: blur(10px);
        }

        .carousel-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

        .carousel-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
            transform: none;
        }

        .carousel-indicators {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }

        .carousel-indicator {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .carousel-indicator.active {
            background: #4ecdc4;
            transform: scale(1.2);
        }

        .carousel-counter {
            text-align: center;
            margin-top: 20px;
            font-size: 1.4rem;
            color: #b0b0b0;
        }

        .match-card {
            background: transparent;
            border-radius: 30px;
            padding: 40px;
            transition: all 0.3s ease;
            border: none;
            position: relative;
            overflow: hidden;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }



        .match-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
        }

        .match-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .match-time {
            font-size: 1.8rem;
            font-weight: 600;
            color: #4ecdc4;
        }

        .match-status {
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 1.2rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .status-live {
            background: linear-gradient(45deg, #ff6b6b, #ff8e8e);
            color: white;
        }

        .status-scheduled {
            background: linear-gradient(45deg, #4ecdc4, #6ee7df);
            color: white;
        }

        .status-finished {
            background: linear-gradient(45deg, #95a5a6, #bdc3c7);
            color: white;
        }

        .match-title {
            font-size: 2.5rem;
            font-weight: 600;
            margin-bottom: 25px;
            line-height: 1.3;
            color: #ffffff;
        }

        .match-league {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .league-logo {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
        }

        .league-name {
            font-size: 1.4rem;
            color: #b0b0b0;
            font-weight: 500;
        }

        .match-channels {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 20px;
        }

        .channel-tag {
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            font-size: 1.1rem;
            color: #ffffff;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .match-actions {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-size: 1.3rem;
            font-weight: 600;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: white;
            color: black;
            border: none;
            outline: none;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 255, 255, 0.4);
            background: #f0f0f0;
            border: none;
            outline: none;
        }

        .btn-primary:focus {
            border: none;
            outline: none;
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .loading {
            text-align: center;
            padding: 50px;
            font-size: 1.2rem;
            color: #b0b0b0;
        }

        .error {
            text-align: center;
            padding: 50px;
            color: #ff6b6b;
            font-size: 1.1rem;
        }

        .no-matches {
            text-align: center;
            padding: 50px;
            color: #b0b0b0;
            font-size: 1.1rem;
        }

        /* Overlay styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(10px);
        }

        .modal-content {
            background: transparent;
            margin: 0;
            padding: 40px;
            border-radius: 0;
            width: 100%;
            height: 100%;
            max-width: none;
            backdrop-filter: none;
            border: none;
            display: flex;
            flex-direction: column;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

                 .modal-title {
             font-size: 2.5rem;
             font-weight: 600;
             color: #ffffff;
             margin-top: -5%;
         }

        .close {
            color: #ffffff;
            font-size: 40px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
        }

        .close:hover {
            color: #ff6b6b;
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

                 .streams-grid {
             display: flex;
             flex-direction: column;
             gap: 15px;
             margin-bottom: 20px;
             flex: 1;
             overflow-y: auto;
             padding-right: 10px;
             align-items: flex-start;
             max-height: 600px;
             scrollbar-width: thin;
             scrollbar-color: rgba(255, 255, 255, 0.3) transparent;
             margin-top: -6%;
         }

        .streams-grid::-webkit-scrollbar {
            width: 8px;
        }

        .streams-grid::-webkit-scrollbar-track {
            background: transparent;
        }

        .streams-grid::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 4px;
        }

        .streams-grid::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.5);
        }

        .stream-item {
            background: transparent;
            padding: 0;
            border-radius: 0;
            border: none;
            transition: all 0.3s ease;
            backdrop-filter: none;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0;
        }

        .stream-item:hover {
            background: transparent;
            transform: none;
            box-shadow: none;
        }

        .stream-name {
            font-weight: 600;
            color: #4ecdc4;
            font-size: 1.4rem;
            margin: 0;
        }

        .stream-actions {
            display: flex;
            justify-content: center;
            width: 100%;
        }

        .btn-small {
            padding: 15px 30px;
            font-size: 1.1rem;
            width: 300px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* Player styles */
        .player-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 20px;
            overflow: hidden;
        }

        .player-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 30px;
            background: rgba(255, 255, 255, 0.05);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .player-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #ffffff;
        }

        .player-close {
            color: #ffffff;
            font-size: 30px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
        }

        .player-close:hover {
            color: #ff6b6b;
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

        .player-iframe {
            flex: 1;
            width: 100%;
            border: none;
            background: #000;
        }

        .back-to-streams {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-top: 20px;
            backdrop-filter: blur(10px);
        }

        .back-to-streams:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        /* Player Overlay Styles */
        .player-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(10px);
            z-index: 2000;
            flex-direction: column;
        }

        .player-overlay-content {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .player-overlay-header {
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            padding: 15px 30px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .player-overlay-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #4ecdc4;
        }

        .player-overlay-controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .player-overlay-close {
            color: #ffffff;
            font-size: 30px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
            border: none;
        }

        .player-overlay-close:hover {
            color: #ff6b6b;
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

        .player-overlay-iframe-container {
            flex: 1;
            position: relative;
            background: #000;
        }

        .player-overlay-iframe {
            width: 100%;
            height: 100%;
            border: none;
            background: #000;
        }

        .player-loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            color: #4ecdc4;
            font-size: 1.2rem;
            z-index: 10;
        }

        .player-overlay-status {
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            padding: 15px 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .player-status {
            background: rgba(255, 255, 255, 0.05);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            color: #4ecdc4;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

                 .player-url-display {
             background: rgba(255, 255, 255, 0.05);
             padding: 10px 15px;
             border-radius: 8px;
             font-family: monospace;
             font-size: 0.8rem;
             color: #4ecdc4;
             word-break: break-all;
             max-width: 400px;
         }
         
         /* Stream Player Styles (dentro del modal) */
         .stream-player-container {
             flex: 1;
             display: flex;
             flex-direction: column;
             background: rgba(0, 0, 0, 0.3);
             border-radius: 20px;
             overflow: hidden;
             height: 100%;
         }
         
         .stream-player-header {
             display: flex;
             justify-content: space-between;
             align-items: center;
             padding: 20px 30px;
             background: rgba(255, 255, 255, 0.05);
             border-bottom: 1px solid rgba(255, 255, 255, 0.1);
         }
         
         .stream-player-title {
             font-size: 1.5rem;
             font-weight: 600;
             color: #4ecdc4;
         }
         
         .stream-player-controls {
             display: flex;
             gap: 10px;
             align-items: center;
             flex-wrap: wrap;
         }
         
         .stream-player-iframe-container {
             flex: 1;
             position: relative;
             background: #000;
             min-height: 400px;
         }
         
         .stream-player-iframe {
             width: 100%;
             height: 100%;
             border: none;
             background: #000;
         }
         
         .stream-loading {
             position: absolute;
             top: 50%;
             left: 50%;
             transform: translate(-50%, -50%);
             text-align: center;
             color: #4ecdc4;
             font-size: 1.2rem;
             z-index: 10;
         }
         
         .stream-player-status {
             background: rgba(0, 0, 0, 0.8);
             backdrop-filter: blur(10px);
             padding: 15px 30px;
             border-top: 1px solid rgba(255, 255, 255, 0.1);
             display: flex;
             justify-content: center;
             gap: 15px;
             flex-wrap: wrap;
         }
         
         .stream-status {
             background: rgba(255, 255, 255, 0.05);
             padding: 8px 15px;
             border-radius: 20px;
             font-size: 0.8rem;
             color: #4ecdc4;
             border: 1px solid rgba(255, 255, 255, 0.1);
         }
         
         .stream-url-display {
             background: rgba(255, 255, 255, 0.05);
             padding: 10px 15px;
             border-radius: 8px;
             font-family: monospace;
             font-size: 0.8rem;
             color: #4ecdc4;
             word-break: break-all;
             max-width: 400px;
         }
         
         /* Fixed Stream Container Styles */
         .fixed-stream-container {
             display: none;
             position: fixed;
             top: 0;
             left: 0;
             width: 100vw;
             height: 100vh;
             background: rgba(0, 0, 0, 0.95);
             backdrop-filter: blur(10px);
             z-index: 2147483647;
         }
         
         .fixed-stream-layout {
             display: flex;
             width: 100%;
             height: 100%;
         }
         
         .fixed-stream-sidebar {
             width: 250px;
             background: rgba(0, 0, 0, 0.8);
             border-right: 1px solid rgba(255, 255, 255, 0.1);
             display: flex;
             flex-direction: column;
             position: relative;
         }
         
         .fixed-stream-title {
             padding: 20px;
             font-size: 1.2rem;
             font-weight: 600;
             color: #ffffff;
             border-bottom: 1px solid rgba(255, 255, 255, 0.1);
         }
         
         .fixed-stream-buttons {
             flex: 1;
             padding: 20px;
             overflow-y: auto;
             display: flex;
             flex-direction: column;
             gap: 10px;
             scrollbar-width: none;
             -ms-overflow-style: none;
         }
         
         .fixed-stream-buttons::-webkit-scrollbar {
             display: none;
         }
         
         .fixed-stream-btn {
             padding: 15px 20px;
             background: white;
             color: black;
             border: none;
             border-radius: 8px;
             font-size: 1rem;
             font-weight: 500;
             cursor: pointer;
             transition: all 0.3s ease;
             text-align: center;
             white-space: nowrap;
             overflow: hidden;
             text-overflow: ellipsis;
             display: flex;
             align-items: center;
             justify-content: center;
         }
         
         .fixed-stream-btn:hover {
             background: #f0f0f0;
             transform: translateY(-2px);
         }
         
         .fixed-stream-btn.active {
             background: #4ecdc4;
             color: white;
         }
         
         .fixed-stream-close {
             position: absolute;
             top: 15px;
             right: 15px;
             background: rgba(255, 255, 255, 0.1);
             color: white;
             border: none;
             border-radius: 50%;
             width: 40px;
             height: 40px;
             font-size: 20px;
             cursor: pointer;
             transition: all 0.3s ease;
             display: flex;
             align-items: center;
             justify-content: center;
         }
         
         .fixed-stream-close:hover {
             background: rgba(255, 255, 255, 0.2);
             transform: scale(1.1);
         }
         
         .fixed-stream-player {
             flex: 1;
             position: relative;
             background: #000;
             height: 80vh;
             display: flex;
             align-items: center;
             justify-content: center;
             margin-top: 10vh;
         }
         
         .fixed-stream-iframe {
             width: 100%;
             height: 100%;
             border: none;
             background: #000;
             scrollbar-width: none;
             -ms-overflow-style: none;
             opacity: 0;
             visibility: hidden;
         }
         
         .fixed-stream-iframe::-webkit-scrollbar {
             display: none;
         }
         
         .fixed-stream-loading {
             position: absolute;
             top: 0;
             left: 0;
             width: 100%;
             height: 100%;
             background: rgba(0, 0, 0, 0.9);
             display: flex;
             align-items: center;
             justify-content: center;
             z-index: 10;
         }
         
         .loading-message {
             color: #4ecdc4;
             font-size: 1.5rem;
             font-weight: 500;
             text-align: center;
             display: flex;
             flex-direction: column;
             align-items: center;
             gap: 20px;
         }
         
         .loading-spinner {
             width: 50px;
             height: 50px;
             border: 4px solid rgba(78, 205, 196, 0.3);
             border-top: 4px solid #4ecdc4;
             border-radius: 50%;
             animation: spin 1s linear infinite;
         }
         
         @keyframes spin {
             0% { transform: rotate(0deg); }
             100% { transform: rotate(360deg); }
         }
         
         .fixed-stream-placeholder {
             display: flex;
             align-items: center;
             justify-content: center;
             height: 100%;
             background: rgba(0, 0, 0, 0.3);
         }
         
         .placeholder-text {
             color: #4ecdc4;
             font-size: 1.5rem;
             font-weight: 500;
             text-align: center;
         }
         
         /* Ocultar elementos de desmuteo y publicidad */
         #UnMutePlayer,
         .UnMute,
         [id*="UnMute"],
         [class*="UnMute"],
         [id*="mute"],
         [class*="mute"],
         button[onclick*="WSUnmute"],
         button[onclick*="Unmute"],
         button[onclick*="mute"] {
             display: none !important;
             visibility: hidden !important;
             opacity: 0 !important;
             pointer-events: none !important;
             position: absolute !important;
             left: -9999px !important;
             top: -9999px !important;
         }
         
         /* Ocultar todas las barras de scroll */
         * {
             scrollbar-width: none !important;
             -ms-overflow-style: none !important;
         }
         
         *::-webkit-scrollbar {
             display: none !important;
         }

        /* Responsive */
        @media (max-width: 1400px) {
            .carousel-container {
                width: 90%;
                height: auto;
                max-height: 600px;
            }
        }
        
        @media (max-width: 768px) {
            .carousel-container {
                width: 95%;
                height: auto;
                max-height: 500px;
            }
            
            .match-title {
                font-size: 1.8rem;
            }
            
            .match-time {
                font-size: 1.4rem;
            }
            
            .btn {
                font-size: 1rem;
                padding: 12px 24px;
            }
            
            .filter-btn {
                font-size: 1.1rem;
                padding: 15px 30px;
            }
            
            .modal-content {
                padding: 20px;
            }
            
            .modal-title {
                font-size: 1.8rem;
            }
            
            .close {
                width: 50px;
                height: 50px;
                font-size: 30px;
            }
            
                                                   .streams-grid {
                  gap: 10px;
                  max-height: 450px;
              }
            
            .stream-item {
                padding: 20px;
            }
            
            .stream-name {
                font-size: 1.1rem;
            }
            
                         .btn-small {
                 padding: 10px 16px;
                 font-size: 0.9rem;
                 width: 250px;
                 height: 50px;
             }
            
            .player-header {
                padding: 15px 20px;
            }
            
            .player-title {
                font-size: 1.2rem;
            }
            
            .player-close {
                width: 40px;
                height: 40px;
                font-size: 25px;
            }
            
                         .back-to-streams {
                 padding: 12px 24px;
                 font-size: 1rem;
             }
             
             .player-overlay-header {
                 padding: 10px 15px;
                 flex-direction: column;
                 gap: 10px;
             }
             
             .player-overlay-title {
                 font-size: 1.2rem;
             }
             
             .player-overlay-controls {
                 gap: 10px;
             }
             
             .player-overlay-close {
                 width: 40px;
                 height: 40px;
                 font-size: 25px;
             }
             
             .player-overlay-status {
                 padding: 10px 15px;
                 gap: 10px;
             }
             
             .player-status {
                 font-size: 0.7rem;
                 padding: 6px 12px;
             }
             
                           .player-url-display {
                  font-size: 0.7rem;
                  max-width: 300px;
              }
              
              .stream-player-header {
                  padding: 10px 15px;
                  flex-direction: column;
                  gap: 10px;
              }
              
              .stream-player-title {
                  font-size: 1.2rem;
              }
              
              .stream-player-controls {
                  gap: 8px;
              }
              
              .stream-player-iframe-container {
                  min-height: 300px;
              }
              
              .stream-player-status {
                  padding: 10px 15px;
                  gap: 10px;
              }
              
              .stream-status {
                  font-size: 0.7rem;
                  padding: 6px 12px;
              }
              
              .stream-url-display {
                  font-size: 0.7rem;
                  max-width: 300px;
              }
              
              .fixed-stream-sidebar {
                  width: 250px;
              }
              
              .fixed-stream-title {
                  padding: 15px;
                  font-size: 1rem;
              }
              
              .fixed-stream-buttons {
                  padding: 15px;
                  gap: 8px;
              }
              
              .fixed-stream-btn {
                  padding: 12px 15px;
                  font-size: 0.9rem;
              }
              
              .fixed-stream-close {
                  width: 35px;
                  height: 35px;
                  font-size: 18px;
              }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .match-card {
            animation: fadeIn 0.6s ease forwards;
        }

        .match-card:nth-child(1) { animation-delay: 0.1s; }
        .match-card:nth-child(2) { animation-delay: 0.2s; }
        .match-card:nth-child(3) { animation-delay: 0.3s; }
        .match-card:nth-child(4) { animation-delay: 0.4s; }
        .match-card:nth-child(5) { animation-delay: 0.5s; }
        .match-card:nth-child(6) { animation-delay: 0.6s; }
    </style>
</head>
<body>
    <div class="container">

        <div class="filters">
            <button class="filter-btn active" data-filter="all">Todos los Partidos</button>
            <button class="filter-btn" data-filter="live">En Vivo</button>
            <button class="filter-btn" data-filter="scheduled">Programados</button>
            <button class="filter-btn" data-filter="finished">Finalizados</button>
        </div>

        <div id="matchesContainer">
            <div class="loading">Cargando partidos...</div>
        </div>

        <!-- Controles del carrusel -->
        <div class="carousel-nav" id="carouselNav" style="display: none;">
            <button class="carousel-btn" id="prevBtn" onclick="previousSlide()">‹</button>
            <button class="carousel-btn" id="nextBtn" onclick="nextSlide()">›</button>
        </div>

        <!-- Indicadores del carrusel -->
        <div class="carousel-indicators" id="carouselIndicators" style="display: none;"></div>

        <!-- Contador del carrusel -->
        <div class="carousel-counter" id="carouselCounter" style="display: none;">
            <span id="currentSlide">1</span> de <span id="totalSlides">0</span>
        </div>
    </div>

    <!-- Modal para streams -->
    <div id="streamModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="modalTitle">Streams Disponibles</h3>
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            <div id="streamsContent"></div>
        </div>
    </div>

    <script>
        let allMatches = [];
        let currentFilter = 'all';
        let currentSlide = 0;
        let filteredMatches = [];

        // Configuración de la API
        const API_URL = 'https://ftvhd.com/diaries.json';

        // Estados de los partidos
        const statusText = {
            'live': 'En Vivo',
            'scheduled': 'Programado',
            'finished': 'Finalizado'
        };

        // Función para formatear fecha y hora
        function formatDateTime(dateStr, timeStr) {
            const date = new Date(dateStr + 'T' + timeStr);
            const now = new Date();
            const diffMs = date - now;
            const diffHours = Math.floor(diffMs / (1000 * 60 * 60));
            const diffMinutes = Math.floor((diffMs % (1000 * 60 * 60)) / (1000 * 60));

            if (diffMs < 0) {
                // Partido ya terminó
                return 'Finalizado';
            } else if (diffMs < 2 * 60 * 60 * 1000 && diffMs > -2 * 60 * 60 * 1000) {
                // Partido en vivo (2 horas antes o después)
                return 'En Vivo';
            } else {
                // Partido programado
                return date.toLocaleDateString('es-ES', {
                    weekday: 'short',
                    month: 'short',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
            }
        }

        // Función para determinar el estado del partido
        function getMatchStatus(dateStr, timeStr) {
            const date = new Date(dateStr + 'T' + timeStr);
            const now = new Date();
            const diffMs = date - now;
            const diffHours = Math.abs(diffMs / (1000 * 60 * 60));

            if (diffMs < 0) {
                return 'finished';
            } else if (diffHours < 2) {
                return 'live';
            } else {
                return 'scheduled';
            }
        }

        // Función para cargar partidos desde la API
        async function loadMatches() {
            try {
                const response = await fetch(API_URL);
                const data = await response.json();
                
                if (data.data && Array.isArray(data.data)) {
                    allMatches = data.data;
                    displayMatches();
                } else {
                    throw new Error('Formato de datos inválido');
                }
            } catch (error) {
                console.error('Error cargando partidos:', error);
                document.getElementById('matchesContainer').innerHTML = 
                    '<div class="error">Error al cargar los partidos. Intenta de nuevo más tarde.</div>';
            }
        }



        // Función para limpiar el título del partido (quitar la categoría)
        function cleanMatchTitle(description) {
            // Buscar el patrón "Categoría: Equipo1 vs Equipo2" y extraer solo los equipos
            const match = description.match(/(?:.*?:\s*)?(.+?)\s+vs\s+(.+?)(?:\s*$)/);
            if (match) {
                return `${match[1].trim()} vs ${match[2].trim()}`;
            }
            // Si no coincide el patrón, devolver el título original
            return description;
        }

        // Función para mostrar partidos en carrusel
        function displayMatches() {
            const container = document.getElementById('matchesContainer');
            filteredMatches = filterMatches(allMatches, currentFilter);

            // Ordenar partidos por fecha y hora
            filteredMatches.sort((a, b) => {
                // Crear fechas completas con hora
                const dateA = new Date(a.attributes.date_diary + 'T' + a.attributes.diary_hour);
                const dateB = new Date(b.attributes.date_diary + 'T' + b.attributes.diary_hour);
                
                // Ordenar cronológicamente (más temprano primero)
                return dateA.getTime() - dateB.getTime();
            });

            if (filteredMatches.length === 0) {
                container.innerHTML = '<div class="no-matches">No hay partidos disponibles con el filtro seleccionado.</div>';
                hideCarouselControls();
                return;
            }

            // Crear el carrusel
            const carouselHTML = `
                <div class="carousel-container">
                    <div class="carousel-track">
                        ${filteredMatches.map(match => {
                            const status = getMatchStatus(match.attributes.date_diary, match.attributes.diary_hour);
                            const embeds = match.attributes.embeds?.data || [];
                            const country = match.attributes.country?.data?.attributes?.name || 'Sin información';
                            const countryImage = match.attributes.country?.data?.attributes?.image?.data?.attributes?.url;
                            const cleanTitle = cleanMatchTitle(match.attributes.diary_description);

                            return `
                                <div class="carousel-slide">
                                    <div class="match-card">
                                        <div class="match-header">
                                            <div class="match-time">${formatDateTime(match.attributes.date_diary, match.attributes.diary_hour)}</div>
                                            <div class="match-status status-${status}">${statusText[status]}</div>
                                        </div>
                                        <div class="match-title">${cleanTitle}</div>
                                        <div class="match-league">
                                            ${countryImage ? `<img src="https://ftvhd.com${countryImage}" alt="${country}" class="league-logo">` : ''}
                                            <div class="league-name">${country}</div>
                                        </div>
                                        ${embeds.length > 0 ? `
                                            <div class="match-channels">
                                                ${embeds.map(embed => `<span class="channel-tag">${embed.attributes.embed_name}</span>`).join('')}
                                            </div>
                                        ` : ''}
                                        <div class="match-actions">
                                            ${embeds.length > 0 ? `
                                                <button class="btn btn-primary" onclick="showStreams('${match.id}', '${cleanTitle}')">
                                                    📺 Ver Streams
                                                </button>
                                            ` : ''}
                                            <button class="btn btn-secondary" onclick="showMatchDetails('${match.id}')">
                                                ℹ️ Detalles
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                </div>
            `;

            container.innerHTML = carouselHTML;
            
            // Inicializar carrusel
            currentSlide = 0;
            setupCarousel();
        }

        // Función para configurar el carrusel
        function setupCarousel() {
            const track = document.querySelector('.carousel-track');
            const totalSlides = filteredMatches.length;
            
            if (totalSlides <= 1) {
                hideCarouselControls();
                return;
            }

            showCarouselControls();
            updateCarouselCounter();
            updateCarouselIndicators();
            updateCarouselButtons();
            updateCarouselPosition();
        }

        // Función para mostrar controles del carrusel
        function showCarouselControls() {
            document.getElementById('carouselNav').style.display = 'flex';
            document.getElementById('carouselIndicators').style.display = 'flex';
            document.getElementById('carouselCounter').style.display = 'block';
        }

        // Función para ocultar controles del carrusel
        function hideCarouselControls() {
            document.getElementById('carouselNav').style.display = 'none';
            document.getElementById('carouselIndicators').style.display = 'none';
            document.getElementById('carouselCounter').style.display = 'none';
        }

        // Función para actualizar posición del carrusel
        function updateCarouselPosition() {
            const track = document.querySelector('.carousel-track');
            if (track) {
                track.style.transform = `translateX(-${currentSlide * 100}%)`;
            }
        }

        // Función para actualizar botones del carrusel
        function updateCarouselButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            
            prevBtn.disabled = currentSlide === 0;
            nextBtn.disabled = currentSlide === filteredMatches.length - 1;
        }

        // Función para actualizar contador del carrusel
        function updateCarouselCounter() {
            document.getElementById('currentSlide').textContent = currentSlide + 1;
            document.getElementById('totalSlides').textContent = filteredMatches.length;
        }

        // Función para actualizar indicadores del carrusel
        function updateCarouselIndicators() {
            const indicatorsContainer = document.getElementById('carouselIndicators');
            indicatorsContainer.innerHTML = '';
            
            for (let i = 0; i < filteredMatches.length; i++) {
                const indicator = document.createElement('div');
                indicator.className = `carousel-indicator ${i === currentSlide ? 'active' : ''}`;
                indicator.onclick = () => goToSlide(i);
                indicatorsContainer.appendChild(indicator);
            }
        }

        // Función para ir a una slide específica
        function goToSlide(slideIndex) {
            currentSlide = slideIndex;
            updateCarouselPosition();
            updateCarouselButtons();
            updateCarouselCounter();
            updateCarouselIndicators();
        }

        // Función para siguiente slide
        function nextSlide() {
            if (currentSlide < filteredMatches.length - 1) {
                currentSlide++;
                updateCarouselPosition();
                updateCarouselButtons();
                updateCarouselCounter();
                updateCarouselIndicators();
            }
        }

        // Función para slide anterior
        function previousSlide() {
            if (currentSlide > 0) {
                currentSlide--;
                updateCarouselPosition();
                updateCarouselButtons();
                updateCarouselCounter();
                updateCarouselIndicators();
            }
        }

        // Función para filtrar partidos
        function filterMatches(matches, filter) {
            if (filter === 'all') {
                // En "Todos" solo mostrar en vivo y programados, NO finalizados
                return matches.filter(match => {
                    const status = getMatchStatus(match.attributes.date_diary, match.attributes.diary_hour);
                    return status === 'live' || status === 'scheduled';
                });
            }
            
            return matches.filter(match => {
                const status = getMatchStatus(match.attributes.date_diary, match.attributes.diary_hour);
                return status === filter;
            });
        }

        // Variables globales para el reproductor
        let currentStreams = [];
        let currentMatchTitle = '';

                          // Función para mostrar streams
         function showStreams(matchId, matchTitle) {
             const match = allMatches.find(m => m.id.toString() === matchId);
             if (!match) return;

             const embeds = match.attributes.embeds?.data || [];
             
             // Agregar 20 streams de prueba
             const testStreams = [
                 { attributes: { embed_iframe: '/embed/test1.html?r=dGVzdA==', embed_name: 'Test Stream 1 - HD' } },
                 { attributes: { embed_iframe: '/embed/test2.html?r=dGVzdA==', embed_name: 'Test Stream 2 - 4K' } },
                 { attributes: { embed_iframe: '/embed/test3.html?r=dGVzdA==', embed_name: 'Test Stream 3 - Premium' } },
                 { attributes: { embed_iframe: '/embed/test4.html?r=dGVzdA==', embed_name: 'Test Stream 4 - Ultra HD' } },
                 { attributes: { embed_iframe: '/embed/test5.html?r=dGVzdA==', embed_name: 'Test Stream 5 - VIP' } },
                 { attributes: { embed_iframe: '/embed/test6.html?r=dGVzdA==', embed_name: 'Test Stream 6 - Master' } },
                 { attributes: { embed_iframe: '/embed/test7.html?r=dGVzdA==', embed_name: 'Test Stream 7 - Elite' } },
                 { attributes: { embed_iframe: '/embed/test8.html?r=dGVzdA==', embed_name: 'Test Stream 8 - Pro' } },
                 { attributes: { embed_iframe: '/embed/test9.html?r=dGVzdA==', embed_name: 'Test Stream 9 - Gold' } },
                 { attributes: { embed_iframe: '/embed/test10.html?r=dGVzdA==', embed_name: 'Test Stream 10 - Platinum' } },
                 { attributes: { embed_iframe: '/embed/test11.html?r=dGVzdA==', embed_name: 'Test Stream 11 - Diamond' } },
                 { attributes: { embed_iframe: '/embed/test12.html?r=dGVzdA==', embed_name: 'Test Stream 12 - Ruby' } },
                 { attributes: { embed_iframe: '/embed/test13.html?r=dGVzdA==', embed_name: 'Test Stream 13 - Emerald' } },
                 { attributes: { embed_iframe: '/embed/test14.html?r=dGVzdA==', embed_name: 'Test Stream 14 - Sapphire' } },
                 { attributes: { embed_iframe: '/embed/test15.html?r=dGVzdA==', embed_name: 'Test Stream 15 - Crystal' } },
                 { attributes: { embed_iframe: '/embed/test16.html?r=dGVzdA==', embed_name: 'Test Stream 16 - Obsidian' } },
                 { attributes: { embed_iframe: '/embed/test17.html?r=dGVzdA==', embed_name: 'Test Stream 17 - Onyx' } },
                 { attributes: { embed_iframe: '/embed/test18.html?r=dGVzdA==', embed_name: 'Test Stream 18 - Pearl' } },
                 { attributes: { embed_iframe: '/embed/test19.html?r=dGVzdA==', embed_name: 'Test Stream 19 - Amethyst' } },
                 { attributes: { embed_iframe: '/embed/test20.html?r=dGVzdA==', embed_name: 'Test Stream 20 - Topaz' } }
             ];
             
             // Combinar streams reales con streams de prueba
             const allStreams = [...embeds, ...testStreams];
             currentStreams = allStreams;
             currentMatchTitle = matchTitle;
             
             // Mostrar el contenedor fijo con los botones de streams (sin cargar automáticamente)
             showFixedStreamContainerWithButtons();
         }

                 // Función para abrir stream en contenedor fijo
         function openStream(iframeUrl, streamName) {
             // Decodificar el parámetro 'r' de la URL de embed
             const embedPath = iframeUrl;
             const domainParam = 'https://ftvhd.com';
             
             // Buscar el parámetro 'r' en la URL
             const urlObj = new URL(embedPath, domainParam);
             const rParam = urlObj.searchParams.get('r');
             
             let streamUrl = '';
             if (rParam) {
                 // Decodificar el parámetro 'r' (base64)
                 try {
                     streamUrl = atob(rParam);
                 } catch (e) {
                     // Si falla la decodificación, usar la URL completa
                     streamUrl = `${domainParam}${embedPath}`;
                 }
             } else {
                 // Si no hay parámetro 'r', usar la URL completa
                 streamUrl = `${domainParam}${embedPath}`;
             }
             
             // Mostrar el stream en contenedor fijo
             showFixedStreamContainer(streamUrl, streamName);
             
             // Volver al placeholder después de 15 segundos
             setTimeout(() => {
                 showFixedStreamContainerWithButtons();
             }, 15000);
         }

                 // Función para mostrar contenedor fijo solo con botones (sin stream automático)
         function showFixedStreamContainerWithButtons() {
             // Crear el contenedor fijo si no existe
             let fixedContainer = document.getElementById('fixedStreamContainer');
             if (!fixedContainer) {
                 fixedContainer = document.createElement('div');
                 fixedContainer.id = 'fixedStreamContainer';
                 fixedContainer.className = 'fixed-stream-container';
                 document.body.appendChild(fixedContainer);
             }
             
             // Crear el contenido del contenedor fijo solo con botones
             const containerHTML = `
                 <div class="fixed-stream-layout">
                     <div class="fixed-stream-sidebar">
                         <div class="fixed-stream-title">${currentMatchTitle}</div>
                         <div class="fixed-stream-buttons">
                             ${currentStreams.map(embed => `
                                 <button class="fixed-stream-btn" 
                                         onclick="openStream('${embed.attributes.embed_iframe}', '${embed.attributes.embed_name}')">
                                     ${embed.attributes.embed_name}
                                 </button>
                             `).join('')}
                         </div>
                         <button class="fixed-stream-close" onclick="closeFixedStreamContainer()">×</button>
                     </div>
                     <div class="fixed-stream-player">
                         <div class="fixed-stream-placeholder">
                             <div class="placeholder-text">Selecciona un stream para reproducir</div>
                         </div>
                     </div>
                 </div>
             `;
             
             fixedContainer.innerHTML = containerHTML;
             fixedContainer.style.display = 'block';
         }
         
         // Función para mostrar contenedor fijo de streams
         function showFixedStreamContainer(streamUrl, streamName) {
             // Crear el contenedor fijo si no existe
             let fixedContainer = document.getElementById('fixedStreamContainer');
             if (!fixedContainer) {
                 fixedContainer = document.createElement('div');
                 fixedContainer.id = 'fixedStreamContainer';
                 fixedContainer.className = 'fixed-stream-container';
                 document.body.appendChild(fixedContainer);
             }
             
             // Crear el contenido del contenedor fijo
             const containerHTML = `
                 <div class="fixed-stream-layout">
                     <div class="fixed-stream-sidebar">
                         <div class="fixed-stream-title">${currentMatchTitle}</div>
                         <div class="fixed-stream-buttons">
                             ${currentStreams.map(embed => `
                                 <button class="fixed-stream-btn ${embed.attributes.embed_name === streamName ? 'active' : ''}" 
                                         onclick="openStream('${embed.attributes.embed_iframe}', '${embed.attributes.embed_name}')">
                                     ${embed.attributes.embed_name}
                                 </button>
                             `).join('')}
                         </div>
                         <button class="fixed-stream-close" onclick="closeFixedStreamContainer()">×</button>
                     </div>
                     <div class="fixed-stream-player">
                         <div class="fixed-stream-loading" id="fixedStreamLoading">
                             <div class="loading-message">
                                 <div class="loading-spinner"></div>
                                 <div>Cargando Stream...</div>
                             </div>
                         </div>
                         <iframe id="fixedStreamIframe" class="fixed-stream-iframe" allowfullscreen sandbox="allow-scripts allow-same-origin allow-forms allow-presentation" referrerpolicy="no-referrer"></iframe>
                     </div>
                 </div>
             `;
             
             fixedContainer.innerHTML = containerHTML;
             fixedContainer.style.display = 'block';
             
             // Configurar el iframe
             const iframe = document.getElementById('fixedStreamIframe');
             const loading = document.getElementById('fixedStreamLoading');
             
             // Mostrar mensaje de carga por defecto
             loading.style.display = 'flex';
             
             // Cargar el stream
             iframe.src = streamUrl;
             
             // Eventos del iframe
             iframe.onload = function() {
                 // El mensaje de carga se mantiene visible hasta que se cierre
                 
                 // Protección adicional contra popups
                 try {
                     iframe.contentWindow.addEventListener('beforeunload', function(e) {
                         e.preventDefault();
                         e.returnValue = '';
                     });
                     
                     // Bloquear window.open en el iframe
                     iframe.contentWindow.open = function() {
                         console.log('Popup bloqueado en iframe:', arguments);
                         return null;
                     };
                     
                     // Ocultar elementos de desmuteo dinámicamente
                     const hideUnmuteElements = () => {
                         const unmuteElements = iframe.contentDocument.querySelectorAll('#UnMutePlayer, .UnMute, [id*="UnMute"], [class*="UnMute"], [id*="mute"], [class*="mute"]');
                         unmuteElements.forEach(el => {
                             el.style.display = 'none';
                             el.style.visibility = 'hidden';
                             el.style.opacity = '0';
                             el.style.pointerEvents = 'none';
                         });
                     };
                     
                     // Ejecutar inmediatamente y cada 2 segundos
                     hideUnmuteElements();
                     setInterval(hideUnmuteElements, 2000);
                     
                 } catch (e) {
                     // Si hay error de cross-origin, es normal
                 }
             };
             
             iframe.onerror = function() {
                 loading.style.display = 'none';
                 loading.innerHTML = '<div>❌ Error al cargar el stream</div>';
             };
         }
         
         // Función para cerrar el contenedor fijo
         function closeFixedStreamContainer() {
             const fixedContainer = document.getElementById('fixedStreamContainer');
             if (fixedContainer) {
                 fixedContainer.style.display = 'none';
                 
                 // Detener el iframe
                 const iframe = document.getElementById('fixedStreamIframe');
                 if (iframe) {
                     iframe.src = '';
                 }
             }
         }
         
         // Función para mostrar stream directamente en el modal
         function showStreamInModal(streamUrl, streamName) {
             // Actualizar el título del modal
             document.getElementById('modalTitle').textContent = `${streamName}`;
             
             // Crear el contenido del reproductor
             const playerHTML = `
                 <div class="stream-player-container">
                     <div class="stream-player-header">
                         <div class="stream-player-title">🎬 ${streamName}</div>
                         <div class="stream-player-controls">
                             <button class="btn btn-secondary btn-small" onclick="toggleStreamFullscreen()">
                                 📺 Pantalla Completa
                             </button>
                             <button class="btn btn-secondary btn-small" onclick="reloadStream()">
                                 🔄 Recargar
                             </button>
                             <button class="btn btn-secondary btn-small" onclick="copyStreamUrl()">
                                 📋 Copiar URL
                             </button>
                             <button class="btn btn-secondary btn-small" onclick="backToStreams()">
                                 ← Volver a Streams
                             </button>
                         </div>
                     </div>
                     <div class="stream-player-iframe-container">
                         <div class="stream-loading" id="streamLoading">
                             <div>🔄 Cargando stream...</div>
                         </div>
                         <iframe id="streamIframe" class="stream-player-iframe" allowfullscreen></iframe>
                     </div>
                     <div class="stream-player-status">
                         <div class="stream-status" id="streamStatus">Estado: Cargando...</div>
                         <div class="stream-url-display" id="streamUrlDisplay">${streamUrl}</div>
                     </div>
                 </div>
             `;
             
             // Actualizar el contenido del modal
             document.getElementById('streamsContent').innerHTML = playerHTML;
             
             // Configurar el iframe
             const iframe = document.getElementById('streamIframe');
             const loading = document.getElementById('streamLoading');
             const status = document.getElementById('streamStatus');
             const urlDisplay = document.getElementById('streamUrlDisplay');
             
             // Cargar el stream
             iframe.src = streamUrl;
             
             // Eventos del iframe
             iframe.onload = function() {
                 loading.style.display = 'none';
                 status.textContent = 'Estado: Reproduciendo';
             };
             
             iframe.onerror = function() {
                 loading.style.display = 'none';
                 status.textContent = 'Estado: Error al cargar';
             };
         }
         
         // Función para cerrar el reproductor y volver a streams
         function closePlayer() {
             backToStreams();
         }

                 // Función para volver a la lista de streams
                   function backToStreams() {
              document.getElementById('modalTitle').textContent = `${currentMatchTitle}`;
             
                          const streamsHTML = currentStreams.map(embed => `
                 <div class="stream-item">
                     <div class="stream-actions">
                         <button class="btn btn-primary btn-small" onclick="openStream('${embed.attributes.embed_iframe}', '${embed.attributes.embed_name}')">
                             ${embed.attributes.embed_name}
                         </button>
                     </div>
                 </div>
             `).join('');

             document.getElementById('streamsContent').innerHTML = `
                 <div class="streams-grid">${streamsHTML}</div>
             `;
         }

        // Función para copiar URL del stream
        function copyStreamUrl(iframeUrl) {
            navigator.clipboard.writeText(iframeUrl).then(() => {
                alert('URL copiada al portapapeles');
            }).catch(() => {
                // Fallback para navegadores que no soportan clipboard API
                const textArea = document.createElement('textarea');
                textArea.value = iframeUrl;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                alert('URL copiada al portapapeles');
            });
        }

        // Función para mostrar detalles del partido
        function showMatchDetails(matchId) {
            const match = allMatches.find(m => m.id.toString() === matchId);
            if (!match) return;

            const details = `
                <h4>Detalles del Partido</h4>
                <p><strong>Descripción:</strong> ${match.attributes.diary_description}</p>
                <p><strong>Fecha:</strong> ${match.attributes.date_diary}</p>
                <p><strong>Hora:</strong> ${match.attributes.diary_hour}</p>
                <p><strong>Liga:</strong> ${match.attributes.country?.data?.attributes?.name || 'Sin información'}</p>
                <p><strong>Streams disponibles:</strong> ${match.attributes.embeds?.data?.length || 0}</p>
            `;

            alert(details);
        }

        // Función para cerrar modal
        function closeModal() {
            document.getElementById('streamModal').style.display = 'none';
        }

        // Función para mostrar overlay del reproductor
        function showPlayerOverlay(streamUrl, streamName) {
            // Crear el overlay del reproductor si no existe
            let playerOverlay = document.getElementById('playerOverlay');
            if (!playerOverlay) {
                playerOverlay = document.createElement('div');
                playerOverlay.id = 'playerOverlay';
                playerOverlay.className = 'player-overlay';
                playerOverlay.innerHTML = `
                    <div class="player-overlay-content">
                        <div class="player-overlay-header">
                            <div class="player-overlay-title">🎬 ${streamName}</div>
                            <div class="player-overlay-controls">
                                <button class="btn btn-secondary btn-small" onclick="togglePlayerFullscreen()">
                                    📺 Pantalla Completa
                                </button>
                                <button class="btn btn-secondary btn-small" onclick="reloadPlayer()">
                                    🔄 Recargar
                                </button>
                                <button class="btn btn-secondary btn-small" onclick="copyPlayerUrl()">
                                    📋 Copiar URL
                                </button>
                                <button class="player-overlay-close" onclick="closePlayerOverlay()">×</button>
                            </div>
                        </div>
                        <div class="player-overlay-iframe-container">
                            <div class="player-loading" id="playerLoading">
                                <div>🔄 Cargando stream...</div>
                            </div>
                            <iframe id="playerIframe" class="player-overlay-iframe" allowfullscreen></iframe>
                        </div>
                        <div class="player-overlay-status">
                            <div class="player-status" id="playerStatus">Estado: Cargando...</div>
                            <div class="player-url-display" id="playerUrlDisplay">${streamUrl}</div>
                        </div>
                    </div>
                `;
                document.body.appendChild(playerOverlay);
            }

            // Actualizar el título del overlay
            const titleElement = playerOverlay.querySelector('.player-overlay-title');
            if (titleElement) {
                titleElement.textContent = `🎬 ${streamName}`;
            }

            // Configurar el iframe
            const iframe = document.getElementById('playerIframe');
            const loading = document.getElementById('playerLoading');
            const status = document.getElementById('playerStatus');
            const urlDisplay = document.getElementById('playerUrlDisplay');

            // Actualizar contenido
            iframe.src = streamUrl;
            urlDisplay.textContent = streamUrl;
            status.textContent = 'Estado: Cargando stream...';
            loading.style.display = 'block';

            // Eventos del iframe
            iframe.onload = function() {
                loading.style.display = 'none';
                status.textContent = 'Estado: Reproduciendo';
            };

            iframe.onerror = function() {
                loading.style.display = 'none';
                status.textContent = 'Estado: Error al cargar';
            };

            // Mostrar overlay
            playerOverlay.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        // Función para cerrar overlay del reproductor
        function closePlayerOverlay() {
            const playerOverlay = document.getElementById('playerOverlay');
            if (playerOverlay) {
                playerOverlay.style.display = 'none';
                document.body.style.overflow = 'auto';
                
                // Detener el iframe
                const iframe = document.getElementById('playerIframe');
                if (iframe) {
                    iframe.src = '';
                }
            }
        }

        // Función para pantalla completa del reproductor
        function togglePlayerFullscreen() {
            const playerOverlay = document.getElementById('playerOverlay');
            if (playerOverlay) {
                if (document.fullscreenElement) {
                    document.exitFullscreen();
                } else {
                    playerOverlay.requestFullscreen();
                }
            }
        }

        // Función para recargar el reproductor
        function reloadPlayer() {
            const iframe = document.getElementById('playerIframe');
            const loading = document.getElementById('playerLoading');
            const status = document.getElementById('playerStatus');
            
            if (iframe) {
                loading.style.display = 'block';
                status.textContent = 'Estado: Recargando...';
                iframe.src = iframe.src;
            }
        }

                 // Función para copiar URL del reproductor
         function copyPlayerUrl() {
             const urlDisplay = document.getElementById('playerUrlDisplay');
             if (urlDisplay && urlDisplay.textContent) {
                 navigator.clipboard.writeText(urlDisplay.textContent).then(() => {
                     alert('URL copiada al portapapeles');
                 }).catch(() => {
                     // Fallback para navegadores que no soportan clipboard API
                     const textArea = document.createElement('textarea');
                     textArea.value = urlDisplay.textContent;
                     document.body.appendChild(textArea);
                     textArea.select();
                     document.execCommand('copy');
                     document.body.removeChild(textArea);
                     alert('URL copiada al portapapeles');
                 });
             } else {
                 alert('No hay URL para copiar');
             }
         }
         
         // Funciones para el reproductor dentro del modal
         function toggleStreamFullscreen() {
             const iframe = document.getElementById('streamIframe');
             if (iframe) {
                 if (document.fullscreenElement) {
                     document.exitFullscreen();
                 } else {
                     iframe.requestFullscreen();
                 }
             }
         }
         
         function reloadStream() {
             const iframe = document.getElementById('streamIframe');
             const loading = document.getElementById('streamLoading');
             const status = document.getElementById('streamStatus');
             
             if (iframe) {
                 loading.style.display = 'block';
                 status.textContent = 'Estado: Recargando...';
                 iframe.src = iframe.src;
             }
         }
         
         function copyStreamUrl() {
             const urlDisplay = document.getElementById('streamUrlDisplay');
             if (urlDisplay && urlDisplay.textContent) {
                 navigator.clipboard.writeText(urlDisplay.textContent).then(() => {
                     alert('URL copiada al portapapeles');
                 }).catch(() => {
                     // Fallback para navegadores que no soportan clipboard API
                     const textArea = document.createElement('textarea');
                     textArea.value = urlDisplay.textContent;
                     document.body.appendChild(textArea);
                     textArea.select();
                     document.execCommand('copy');
                     document.body.removeChild(textArea);
                     alert('URL copiada al portapapeles');
                 });
             } else {
                 alert('No hay URL para copiar');
             }
         }

                 // Bloquear popups y publicidad
         window.addEventListener('beforeunload', function(e) {
             e.preventDefault();
             e.returnValue = '';
         });
         
         // Interceptar window.open para bloquear popups
         const originalWindowOpen = window.open;
         window.open = function() {
             console.log('Popup bloqueado:', arguments);
             return null;
         };
         
         // Deshabilitar función WSUnmute
         window.WSUnmute = function() {
             console.log('Función WSUnmute bloqueada');
             return false;
         };
         
         // Interceptar cualquier función de desmuteo
         Object.defineProperty(window, 'WSUnmute', {
             value: function() {
                 console.log('Función WSUnmute interceptada y bloqueada');
                 return false;
             },
             writable: false,
             configurable: false
         });
         
         // Event listeners
         document.addEventListener('DOMContentLoaded', () => {
            loadMatches();

            // Filtros
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    e.target.classList.add('active');
                    currentFilter = e.target.dataset.filter;
                    currentSlide = 0; // Resetear a la primera slide al cambiar filtro
                    displayMatches();
                             });
             
             // Detectar navegación hacia atrás (Android TV, navegador)
             window.addEventListener('popstate', () => {
                 const fixedContainer = document.getElementById('fixedStreamContainer');
                 if (fixedContainer && fixedContainer.style.display === 'block') {
                     closeFixedStreamContainer();
                 }
             });
             
             // Detectar cuando la ventana pierde el foco (Android TV)
             window.addEventListener('blur', () => {
                 const fixedContainer = document.getElementById('fixedStreamContainer');
                 if (fixedContainer && fixedContainer.style.display === 'block') {
                     closeFixedStreamContainer();
                 }
             });
         });

            // Cerrar modal al hacer clic fuera
            window.addEventListener('click', (e) => {
                const modal = document.getElementById('streamModal');
                if (e.target === modal) {
                    closeModal();
                }
            });

                         // Navegación con teclado
             document.addEventListener('keydown', (e) => {
                 if (e.key === 'ArrowLeft') {
                     previousSlide();
                 } else if (e.key === 'ArrowRight') {
                     nextSlide();
                 } else if (e.key === 'Escape') {
                     // Cerrar overlay del reproductor con Escape
                     const playerOverlay = document.getElementById('playerOverlay');
                     if (playerOverlay && playerOverlay.style.display === 'flex') {
                         closePlayerOverlay();
                     }
                     
                     // Cerrar contenedor fijo con Escape
                     const fixedContainer = document.getElementById('fixedStreamContainer');
                     if (fixedContainer && fixedContainer.style.display === 'block') {
                         closeFixedStreamContainer();
                     }
                 }
             });
             
             // Detectar botón atrás de Android TV
             document.addEventListener('keydown', (e) => {
                 // Código 8 = Backspace, Código 27 = Escape, Código 10009 = Back button (Android TV)
                 if (e.keyCode === 8 || e.keyCode === 27 || e.keyCode === 10009) {
                     const fixedContainer = document.getElementById('fixedStreamContainer');
                     if (fixedContainer && fixedContainer.style.display === 'block') {
                         closeFixedStreamContainer();
                         e.preventDefault();
                     }
                 }
             });
        });

        // Actualizar cada 5 minutos
        setInterval(loadMatches, 5 * 60 * 1000);
    </script>
</body>
</html>
